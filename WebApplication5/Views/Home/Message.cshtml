
@{
    Layout = null;
    ViewBag.Title = "信息首页";
}
<style>
    body, #message {
        /*background-color: #E6EEF8*/
    }
</style>

<div id="message" style="height:100%">
    <div style="width:30%;height:60%;float:left;padding:5px 2px 1px 5px;">
        <div class="easyui-panel" data-options="fit:true">
            <div style="float:left;margin:8px;">
                <img src="~/Content/images/tip.png" />
            </div>
            <div style="float:left;margin-top:24px;">您有<span style="font-size:x-large;color:orange;">15</span>条提醒消息！</div>
            <div style="width:90%;float:left;">
                <ul>
                    <li>您有<label style="color:red;">5</label>条待办业务需要处理。</li>
                </ul>
            </div>
        </div>
    </div>

    <div style="width:40%;height:60%;float:left;padding:5px 2px 1px 5px;">
        <div class="easyui-panel" data-options="fit:true,border:false">
            <div style="float:left;width:49%;height:30%;background-color:#dc930d;padding:10px 5px 5px 15px;">
                <div style="float:left;margin-top:2px;">
                    <img src="~/Content/images/message.png" />
                </div>
                <div style="float:left;color:white;">
                    <span style="font-size:xx-large;margin:2px;">15</span>个<br />&nbsp;待办事项未处理
                </div>
            </div>
            <div style="float:left;width:2%;height:30%;background-color:white;"></div>
            <div style="float:left;width:49%;height:30%;background-color:#8b3d65;padding:10px 5px 5px 15px;">
                <div style="float:left;margin-top:2px;">
                    <img src="~/Content/images/writing.png" />
                </div>
                <div style="float:left;color:white;">
                    <span style="font-size:xx-large;margin:2px;">2</span>个<br />&nbsp;累计申请或办理事项
                </div>
            </div>
            <div style="float:left;width:100%;height:2%;"></div>
            <div class="easyui-panel" style="float:left;width:100%;height:68%;">
                <p style="font-size:large;margin:6px;">系统共设置有6个部门、12个岗位、25位员工记录。</p>
            </div>
        </div>
    </div>
    <div style="width:30%;height:60%;float:left;padding:5px 5px 1px 5px;">
        <div class="easyui-panel" title="公告列表" data-options="fit:true">

        </div>
    </div>
    <div style="width:70%;height:40%;float:left;padding:5px 2px 1px 5px;">
        <div class="easyui-panel" title="部门人员统计" data-options="fit:true">

        </div>
    </div>
    <div style="width:30%;height:40%;float:left;padding:5px 5px 1px 5px;">
        <div class="easyui-panel" title="常用附件" data-options="fit:true">

        </div>
    </div>
</div>

@*<div id="message" class="easyui-layout" data-options="fit:true">
        <div data-options="region:'east',split:true,border:false" style="width:30%;padding:5px 5px 0px 0px;">
            <div class="easyui-panel" data-options="title:'公告列表',border:true,fit:true">
                公告列表<br />
            </div>
        </div>
        <div data-options="region:'west',split:true" style="width:30%;">
            系统提醒
        </div>
        <div data-options="region:'center',border:false">
            标题说明情况
        </div>
        <div data-options="region:'south',split:true,border:false" style="height:45%;">
            <div class="easyui-layout" data-options="fit:true,border:false">
                <div data-options="region:'center',border:false" style="padding:5px 5px 5px 5px">
                    <div class="easyui-panel" data-options="title:'部门人员统计',border:true,fit:true">
                        部门人员统计<br />
                    </div>
                </div>
                <div data-options="region:'east',split:true,border:false" style="width:30%;padding:5px 5px 5px 0px;">
                    <div class="easyui-panel" data-options="title:'日常办公附件',border:true,fit:true">
                        日常办公附件<br />
                    </div>
                </div>
            </div>
        </div>
    </div>*@
@*<table id="mytable" style="height:100%">
        <tr>
            <td rowspan="2">
                <div class="easyui-panel" id="list-box" style="height:33%" data-options="style:{margin:'10px'}">
                    <ul id="list"></ul>
                </div>
            </td>
            <td>
                <div class="easyui-panel" id="shiwu-box" data-options="style:{margin:'10px'}">
                    <div id="first" style="min-width: 300px; height:300px; max-width: 600px; margin: 0 auto"></div>
                </div>
            </td>
            <td>
                <div class="easyui-panel" id="shiwu-box" data-options="style:{margin:'10px'}">
                    <div id="first" style="min-width: 300px; height:300px; max-width: 600px; margin: 0 auto"></div>
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <div id="tzjh" class="easyui-panel" data-options="height:320,style:{margin:'10px'}">
                    <div id="second" style="min-width: 300px; height:300px; max-width: 750px; margin: 0 auto"></div>
                </div>
            </td>
            <td>
                <div id="cyjh" class="easyui-panel" data-options="height:320,style:{margin:'10px'}">
                    <div id="third" style="min-width: 300px; height:300px; max-width: 600px; margin: 0 auto"></div>
                </div>
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <div id="tzjh" class="easyui-panel" data-options="height:320,style:{margin:'10px'}">
                    <div id="second" style="min-width: 300px; height:300px; max-width: 750px; margin: 0 auto"></div>
                </div>
            </td>
            <td>
                <div id="cyjh" class="easyui-panel" data-options="height:320,style:{margin:'10px'}">
                    <div id="third" style="min-width: 300px; height:300px; max-width: 600px; margin: 0 auto"></div>
                </div>
            </td>
        </tr>
    </table>*@

<script>
    $(document).ready(function () {
        loadData();


        //var clientWidth = document.documentElement.clientWidth;
        //var tdWidth = (clientWidth - 170) / 2;
        //var panelWidth = (clientWidth - 200) / 2;

        //$('td').css('width', tdWidth);
        //$('.easyui-panel').css('width', panelWidth);
        //$('#mytable').css('width', clientWidth - 170);
    });

    function loadData() {
        $.ajax({
            url: '@Url.Action("GetMSGData", "Home")',
            showMessage: false,
            success: function (data) {
                $("#list").empty();
                if (data.length == 0) {
                    $("#list").html("<p style='margin-left:5px;'>暂无新提醒！</p>");
                }

                $.each(data, function (index, record) {
                    if (record.Msg.indexOf("在办箱") != -1 && record.Msg.indexOf("<label>") != -1) {
                        $("span:contains('在办箱')").html("在办箱(" + record.Msg.substring(record.Msg.indexOf("<label>") + 7, record.Msg.indexOf("</label>")) + ")");
                    }
                    if (record.Msg.indexOf("待办箱") != -1 && record.Msg.indexOf("<label>") != -1) {
                        $("span:contains('待办箱')").html("待办箱(" + record.Msg.substring(record.Msg.indexOf("<label>") + 7, record.Msg.indexOf("</label>")) + ")");
                    }
                    if (true) {

                    }
                    var item = $('<li><a href="#">' + record.Msg + '</a><hr /></li>');
                    $("#list").append(item);
                    item.bind('click', function () {
                        commonhelper.addTab(
                            $('#workPlace'), record.Name, RootDirectory + record.Url, record.iconCls, {
                                tools: [{
                                    iconCls: 'icon-mini-refresh',
                                    handler: function (opt) {
                                        setTimeout(function () {
                                            var tab = $('#workPlace').tabs('getSelected');
                                            $("#workPlace").tabs('update', {
                                                tab: tab,
                                                type: 'body',
                                                options: {
                                                    title: record.Name
                                                }
                                            });
                                        });
                                    }
                                }]
                            }
                            );
                    })
                })
            }
        });
    }
</script>
